<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/favicon.ico">
  <link rel="stylesheet" type="text/css" href="/css/style.css">
  <script src="https://kit.fontawesome.com/6973571aae.js" crossorigin="anonymous"></script>
  <title>Const Coccinelle</title>
<meta property="og:title" content="CosmicFresh Kernel" />
      <meta property="og:description" content="Custom kernel for M21." />
      <meta property="og:type" content="article" />
      <meta property="og:url" content="/posts/CosmicFresh" />
      <meta property="og:image" content="https://const.eu.org/CosmicFresh.jpg" />

</head>

<h1 class="main-header">Const Coccinelle</h1>
<nav>
  <a href="/index"> <i class="fa-solid fa-user-astronaut"></i> Home</a>
  <a href="/about"> <i class="fa-solid fa-qrcode"></i> About</a>
  <a href="https://p.const.eu.org"> <i class="fa-solid fa-paste"></i> Paste</a>
  <a href="/archive"> <i class="fa-solid fa-box-archive"></i> Archive</a>
  <a href="/uses"> <i class="fa-solid fa-microchip"></i> Uses</a>
</nav>

<article>
<center>
<img src="../img/CosmicFresh.png" style="border: 0px">
</center>
<center>
<strong>CosmicFresh kernel for M21 devices running OneUI 3.1</strong>
</center>
<details>
<summary>
CONTENTS
</summary>
<ul>
<li><a href="#features">Features</a></li>
<li><a href="#changelog">Changelog</a></li>
<li><a href="#instructions">Flashing instructions</a></li>
<li><a href="#downloads">Downlod links</a></li>
<li><a href="#sources">Source code</a></li>
</ul>
</details>
<h2 id="features">/ Features / <a name="features"></a></h2>
<p>Supports M21 (2020) devices<br />
Samsung debug cruft nuked to reduce overall overhead<br />
Using zswap + vbswap to replace zram:</p>
<ul>
<li>Dropped Samsung hacks riddled zram</li>
<li>Backported zsmalloc memory allocator from <code>v5.17</code></li>
<li>Backported zswap changes from mainline</li>
<li>Samsung zswap hacks forwardported</li>
</ul>
Latest SElinux subsystem backported from mainline<br />
mmap/mremap backported from mainline for perf boost<br />
vmalloc backported from mainline to improve memory allocation
performance<br />
tlb backports from mainline<br />
Latest G2D drivers backported from <code>GS101</code><br />
Kernel arm64 routines backported from <code>linux-next</code><br />
Kernel libs backported from mainline<br />
Latest Wi-Fi/BT driver stack from Samsung<br />
GPU driver improvements backported from <code>GS101</code><br />
Hrtimer backported from mainline<br />
CGROUP and FREEZER_V2 backported from mainline<br />
<code>FUSE_SHORTCIRCUIT</code> ported over from <code>oplus</code> for
better io perf<br />
Updated ARM GPU drivers stack<br />

<details>
<summary>
And more
</summary>
<p>Uses Sultan’s Simple LMK<br />
VLAs nuked in their entirety<br />
Use 300hz ticker rate<br />
Network stack improvements<br />
LSE atomic enabled<br />
vDSO 32 patches to improve 32-bit performance<br />
Uses arter97’s RapidGC as f2fs GC<br />
Optimized freq table for the SOC<br />
Touchscreen driver optimizations for lower power usage and latency<br />
Fingerprint driver optimizations for lower latency<br />
Uses SRandom for better perf(but very unsafe)<br />
Westwood as the default TCP network congestion control<br />
Modules inlined for an overall lighter kernel<br />
Built with Clang 12 and ThinLTO, DCE and -03 optimizations<br />
Power usage optimizations<br />
Memory management optimizations<br />
Affined important services to Big cluster.</p>
</details>
<h2 id="changelog">/ Changelog / <a name="changelog"></a></h2>
<details>
<summary>
FINAL-HOTFIX-Const:
</summary>
<ul>
<li>Fix thermal issues</li>
<li>Fix <code>kswapd</code> allocation failures<br />
</li>
<li>Fix performance regression caused by <code>rcu</code> fuckup<br />
</li>
<li>Fix slow internet speed issue<br />
</li>
<li>Reduce system latency<br />
</li>
<li>Fixes to zswap<br />
</li>
<li>Reduce logspam<br />
</li>
<li>Optimize <code>/proc</code> node<br />
</li>
<li>Revert changes to EMS <code>overutil ratios</code><br />
</li>
<li>Properly affine gpu to Big cluster<br />
</li>
<li>Patches from OSRC A12 kernel</li>
<li>Reduce power usage</li>
</ul>
</details>
<details>
<summary>
FINAL-Const:
</summary>
<p>
<ul>
<li>
Final feature complete release
</li>
</ul>
</p>
</details>
<h3 id="flashing-instructions">Flashing instructions
<a name="instructions"></a></h3>
<ul>
<li>Flash <code>Disable-userspace-slmk</code> module using magisk
manager</li>
<li>Reboot to recovery</li>
<li>Flash the kernel</li>
<li>Flash null vbmeta (Just needs to be done once)
<ul>
<li>Flash in ap block in odin</li>
<li>Wipe data from recovery</li>
</ul></li>
<li>Enjoy</li>
</ul>
<h3 id="downloads">Downloads <a name="downloads"></a></h3>
<ul>
<li><strong>CosmicFresh-FINAL-HOTFIX-Const</strong> - <a
href="https://github.com/Dark-Matter7232/Cosmic-fresh/releases/download/FINAL-HOTFIX-Const/CosmicFresh-FINAL-HOTFIX-Const.zip">Download</a></li>
<li><strong>Disable-userspace-slmk</strong> - <a
href="https://github.com/Dark-Matter7232/Cosmic-fresh/releases/download/R4-Const/Disable-userspace-slmk.zip">Download</a></li>
<li><strong>Null-vbmeta</strong> - <a
href="https://github.com/Dark-Matter7232/Cosmic-fresh/releases/download/FINAL-Const/vbmeta.tar">Download</a></li>
</ul>
<h3 id="sources">Sources <a name="sources"></a></h3>
<ul>
<li><strong>Kernel source</strong> - <a
href="https://github.com/Dark-Matter7232/Cosmic-fresh">Click
here</a></li>
</ul>
<p id="lastUpdated-css">
Updated on <span id="lastUpdated"></span>
</p>
<hr>
<script src="https://utteranc.es/client.js"
        repo="Dark-Matter7232/Dark-Matter7232.github.io"
        issue-term="pathname"
        theme="github-dark-orange"
        crossorigin="anonymous"
        async>
</script>
</article>

<script>
  document.getElementById("lastUpdated").innerHTML = document.lastModified;
</script>

<footer>
  <hr>
  <i class="far fa-copyright fa-fw"></i>2020-2022 Const | Made with ❤ in India</p>
</footer>
</body>
